# ğŸ”„ Diagrama de Flujo de Datos - Brukt

## ğŸ“± Flujo de AutenticaciÃ³n

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   DATABASE      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 1. Login Form   â”‚â”€â”€â”€â–¶â”‚ 2. Validate     â”‚â”€â”€â”€â–¶â”‚ 3. Check User   â”‚
â”‚    (email/pass) â”‚    â”‚    Credentials  â”‚    â”‚    Credentials  â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 6. Store JWT    â”‚â—€â”€â”€â”€â”‚ 5. Send JWT     â”‚â—€â”€â”€â”€â”‚ 4. Return User  â”‚
â”‚    Token        â”‚    â”‚    Token        â”‚    â”‚    Data         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’° Flujo de GestiÃ³n de Gastos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   DATABASE      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 1. Add Expense  â”‚â”€â”€â”€â–¶â”‚ 2. Validate     â”‚â”€â”€â”€â–¶â”‚ 3. Insert       â”‚
â”‚    Form         â”‚    â”‚    Data         â”‚    â”‚    Expense      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 6. Update UI    â”‚â—€â”€â”€â”€â”‚ 5. Send Success â”‚â—€â”€â”€â”€â”‚ 4. Return       â”‚
â”‚    with New     â”‚    â”‚    Response     â”‚    â”‚    Created ID   â”‚
â”‚    Expense      â”‚    â”‚                 â”‚    â”‚                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ‘¥ Flujo de GestiÃ³n de Grupos

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   DATABASE      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 1. Create Group â”‚â”€â”€â”€â–¶â”‚ 2. Validate     â”‚â”€â”€â”€â–¶â”‚ 3. Insert       â”‚
â”‚    Form         â”‚    â”‚    Group Data   â”‚    â”‚    Group        â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 6. Add Creator  â”‚â—€â”€â”€â”€â”‚ 5. Add Creator  â”‚â—€â”€â”€â”€â”‚ 4. Return       â”‚
â”‚    as Member    â”‚    â”‚    as Member    â”‚    â”‚    Group ID     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“Š Flujo de AnÃ¡lisis de Deudas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   DATABASE      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 1. Request Debt â”‚â”€â”€â”€â–¶â”‚ 2. Complex      â”‚â”€â”€â”€â–¶â”‚ 3. Execute      â”‚
â”‚    Analysis     â”‚    â”‚    Query Logic  â”‚    â”‚    Multiple     â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚    Queries      â”‚
â”‚ 6. Display Debt â”‚â—€â”€â”€â”€â”‚ 5. Process &    â”‚â—€â”€â”€â”€â”‚ 4. Return Raw   â”‚
â”‚    Summary      â”‚    â”‚    Calculate    â”‚    â”‚    Data         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ”„ Flujo de Invitaciones

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   DATABASE      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 1. Send Invite  â”‚â”€â”€â”€â–¶â”‚ 2. Validate     â”‚â”€â”€â”€â–¶â”‚ 3. Insert       â”‚
â”‚    (email)      â”‚    â”‚    Email        â”‚    â”‚    Invitation   â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 6. Show Success â”‚â—€â”€â”€â”€â”‚ 5. Send Success â”‚â—€â”€â”€â”€â”‚ 4. Return       â”‚
â”‚    Message      â”‚    â”‚    Response     â”‚    â”‚    Invite ID    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ’¸ Flujo de Pagos de Deudas

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   DATABASE      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 1. Record       â”‚â”€â”€â”€â–¶â”‚ 2. Validate     â”‚â”€â”€â”€â–¶â”‚ 3. Insert       â”‚
â”‚    Payment      â”‚    â”‚    Payment      â”‚    â”‚    Payment      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 6. Update Debt  â”‚â—€â”€â”€â”€â”‚ 5. Recalculate  â”‚â—€â”€â”€â”€â”‚ 4. Return       â”‚
â”‚    Display      â”‚    â”‚    Debts        â”‚    â”‚    Payment ID   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ›¡ï¸ Flujo de Seguridad

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   DATABASE      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 1. Include JWT  â”‚â”€â”€â”€â–¶â”‚ 2. Verify JWT   â”‚â”€â”€â”€â–¶â”‚ 3. Check User   â”‚
â”‚    in Header    â”‚    â”‚    Token        â”‚    â”‚    Exists       â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 6. Handle Auth  â”‚â—€â”€â”€â”€â”‚ 5. Grant/Deny   â”‚â—€â”€â”€â”€â”‚ 4. Return User  â”‚
â”‚    Response     â”‚    â”‚    Access        â”‚    â”‚    Permissions  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“¡ Secuencia de Peticiones TÃ­pica

```
1. Usuario abre la app
   â†“
2. Frontend verifica JWT en localStorage
   â†“
3. Si no hay JWT â†’ Redirige a Login
   â†“
4. Si hay JWT â†’ Hace peticiÃ³n a /api/auth/profile
   â†“
5. Backend verifica JWT y responde con datos del usuario
   â†“
6. Frontend carga Dashboard con datos del usuario
   â†“
7. Dashboard hace peticiÃ³n a /api/expenses
   â†“
8. Backend consulta base de datos y responde con gastos
   â†“
9. Frontend renderiza lista de gastos
```

## ğŸ”§ Manejo de Errores

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   FRONTEND      â”‚    â”‚    BACKEND      â”‚    â”‚   DATABASE      â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 1. User Action  â”‚â”€â”€â”€â–¶â”‚ 2. Process      â”‚â”€â”€â”€â–¶â”‚ 3. Database     â”‚
â”‚                 â”‚    â”‚    Request      â”‚    â”‚    Operation    â”‚
â”‚                 â”‚    â”‚                 â”‚    â”‚                 â”‚
â”‚ 6. Show Error   â”‚â—€â”€â”€â”€â”‚ 5. Send Error   â”‚â—€â”€â”€â”€â”‚ 4. Return Error â”‚
â”‚    Message      â”‚    â”‚    Response     â”‚    â”‚    (if any)     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸš€ Optimizaciones de Rendimiento

### **Frontend**
- **Lazy Loading:** Componentes cargados bajo demanda
- **MemoizaciÃ³n:** Evita re-renders innecesarios
- **Caching:** Datos en localStorage/sessionStorage

### **Backend**
- **Connection Pooling:** ReutilizaciÃ³n de conexiones DB
- **Query Optimization:** Consultas optimizadas
- **Response Caching:** Cache de respuestas frecuentes

### **Base de Datos**
- **Indexes:** Ãndices en campos frecuentemente consultados
- **Query Optimization:** Consultas optimizadas
- **Connection Limits:** LÃ­mites de conexiones concurrentes
